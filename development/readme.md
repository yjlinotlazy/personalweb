# Overview

This application is designed to serve low-traffic personal website and family memory sharing.

## Requirementss

### Contents

This website supports 3 types of media

 1. Markdown files. The file can have multipel attachments. Images can be inserted via url
 2. Painting. Variation of markdown files. An entry can have thumbnail as the title.
    Paintings can also be bucketed by sets.
 3. Photo diary. This type has strong emphasis on image contents. Text content isn't
    necessary. Event date is an important attribute.

### Access control

This website offers following subdomains
 1. demo: entry point for testing and demonstration
 2. admin: only admins can make edits
 3. family: only family members can see family photo diary.

Authentication mechanism
 - User enters a code
 - App makes a service call to get access level. The level is stored in cookies.
 - TODO: use can log out and re-authentical with a different code

## Endpoints

 - /articles: manage markdown files
 - /images: manage images

### CORS

Need to allow cross-origin access at two places.

1. Flat file access from web hosting service. This is done via a .htaccess file.
2. Swagger API generated by fastapi. This is enabled by CORSMiddleware. See app.py.
3. Add required headers to APIG accepted headers:
   - 'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,type,name,user,accept,x-requested-with'

### HTTPS

TODO: https://www.freecodecamp.org/news/how-to-set-up-https-locally-with-create-react-app/

## Deployment

### UI

Modify config.js based on the type of deployment.
Run npm run build
Use FTP app to upload to web hosting service.

### Backend

Go to the service package and run ./deploy.sh to deploy to lambda.
Lambda env variables and API Gateway are added manually
